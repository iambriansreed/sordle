(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const S=(t,e=document)=>{const s=Array.from(e.querySelectorAll(t));if(!s)throw new Error(`Element not found: ${t}`);return s},u=(t,e=document)=>{const s=e==null?void 0:e.querySelector(t);if(!s)throw new Error(`Element not found: ${t}`);return s},_=t=>({getJson:async c=>(t(!0),window.fetch(c).then(n=>n.json()).then(async n=>(t(!1),n)).catch(()=>null)||null),getText:async c=>(t(!0),window.fetch(c).then(n=>n.text()).then(async n=>(t(!1),n)).catch(()=>null)||null)}),z=(t,e)=>Math.floor(Math.random()*(e-t)+t),G=t=>{const{getText:e,getJson:s}=_(t),c=[];return{loadWords:async()=>{let d=localStorage.getItem("sordle:words");d||(d=await e("https://iambrian.com/sordle-words/5-letter-words.txt"),d&&localStorage.setItem("sordle:words",d)),d&&c.push(...d.split(`
`))},getRandomWord:async()=>{const d=c[z(0,c.length-1)];return(await s("https://iambrian.com/sordle-words/5-letter-words/"+d+".json"))[0]},checkWord:d=>c.includes(d)}},A=async t=>await new Promise(e=>{setTimeout(()=>{e()},t)}),U=async()=>await new Promise(t=>{requestAnimationFrame(()=>{const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(void 0)})});function X(){const t=u(".notify");let e;const s=()=>{t.style.opacity="0",e=setTimeout(()=>{t.innerHTML=""},200)};return{notify:(n,a=!0)=>{e&&clearTimeout(e),t.innerHTML=n,setTimeout(()=>{t.style.opacity="1"},1),a&&(e=setTimeout(()=>{s()},1500))},hideNotify:s}}const j=6,y=5;function Y(){const t=u(".app"),e=u(".overlay"),s=u("main"),c=u("main").innerHTML,n={welcome:u('[data-template="modal-welcome"]').innerHTML,success:u('[data-template="modal-success"]').innerHTML,fail:u('[data-template="modal-fail"]').innerHTML};e.innerHTML=n.welcome;let a,r=!0;const d=o=>{o!==r&&(r=o,o&&t.classList.add("loading"),a&&clearInterval(a),a=setTimeout(()=>{if(!r){t.classList.remove("loading");return}d(!0)},2e3))},{checkWord:W,getRandomWord:C,loadWords:I}=G(d);I().then(()=>x());const{hideNotify:R,notify:b}=X();let h,L=[],N;const $={},v=()=>S(`main .attempt:nth-child(${f.index+1}) .char`),K=async(o,i)=>{R(),L=o,h=i,s.innerHTML=c,N=u(".attempts",s);let l="";for(let m=0;m<j;m++){l+='<div class="attempt">';for(let p=0;p<y;p++)l+=`<div class="char" id="char-${m}-${p}"><div class="front"></div><div class="back"></div></div>`;l+="</div>"}N.innerHTML=l,await U(),g({index:0,chars:[]}),setTimeout(()=>{S("[data-key]",s).forEach(m=>{m.dataset.key&&($[m.dataset.key]=m)})},10)};let f={chars:[],index:0};const k=o=>{const i=u(`#char-${f.index}-${f.chars.length}`);u(".front",i).innerText=o||"",u(".back",i).innerText=o||""},g=o=>{f=o};let T=!1;const q=async(o=300)=>{T=!0,await Promise.all([...v().map(async(i,l)=>{await A(o*l),i.classList.add("flip")}),await A(o*(y+2))]),T=!1};let M;const E=(o="cell")=>{M&&clearTimeout(M);let i=v();o!=="row"&&(i=[i[0]]),i.forEach(l=>l.classList.add("horizontal-shake")),M=setTimeout(()=>{i.forEach(l=>l.classList.remove("horizontal-shake"))},500)},x=async()=>{const o=await C();return K(o.word.split(""),o)},O=()=>{h!=null&&h.meanings&&setTimeout(()=>{u("[data-definition]",e).innerHTML=`<h3>${L.join("")}</h3>
<ul class="meanings">
    ${h==null?void 0:h.meanings.map(o=>{var i;return`    
    <li>
        <p class="part-of-speech"><span>${o.partOfSpeech}</span></p>
        <ol>
            ${(i=o.definitions)==null?void 0:i.map(l=>`
            <li>
                <p>${l.definition}</p>
                ${l.example?`<p class="example">"${l.example}"</p>`:""}
            </li>`).join("")}
        </ol>
    </li>`}).join("")}
</ul>`},1)},D=async()=>{if(f.chars.length<y){E(),b("Not enough letters");return}if(!await W(f.chars.join(""))){E("row"),b("Not in word list");return}let i=0;const l={},m=v();f.chars.forEach((p,w)=>{m[w].classList.remove("green","yellow","none");const H=Q(p,w,L,f.chars);l[p]=B(l[p],H),m[w].classList.add(H),H==="green"&&i++}),await q(),Object.entries(l).forEach(([p,w])=>{$[p].classList.add(w)}),i===y?(e.innerHTML=n.success,setTimeout(()=>{u("[data-attempt-text]",e).innerText=` ${f.index} ${f.index?"attempts":"attempt"}`},1),O(),x()):f.index+1===j&&(e.innerHTML=n.fail,O(),x()),g({chars:[],index:f.index+1})},P=o=>{if(!T&&$[o]){if(o==="backspace"){f.chars.length?(f.chars.pop(),k(""),g(f)):E();return}if(o==="enter"){D();return}f.chars.length===y&&f.chars.pop(),k(o),f.chars.push(o),g(f)}},J=async o=>{if(T)return;const i=o.target;if(i.nodeName.toLowerCase()==="a")return;if(o.preventDefault(),i.blur(),i.nodeName.toLowerCase()==="h1"){e.innerHTML=n.welcome;return}if(i.dataset.action==="closeModal"){e.innerHTML="";return}const l=i.dataset.key;l&&P(l)};t.addEventListener("click",J),e.addEventListener("click",()=>{e.innerHTML=""}),window.addEventListener("keyup",o=>P(o.key.toLowerCase()))}const F={none:0,yellow:1,green:2};function B(t,e){return!t||F[e]>F[t]?e:t}function Q(t,e,s,c){if(s[e]===t)return"green";if(s.includes(t)){const n={};for(let r=0;r<s.length;r++){const d=s[r];n[d]=(n[d]||0)+1}for(let r=0;r<c.length;r++)s[r]===c[r]&&(n[c[r]]=(n[c[r]]||1)-1);const a={};for(let r=0;r<=e;r++){if(s[r]===c[r])continue;const d=c[r];a[d]=(a[d]||0)+1}if(a[t]<=(n[t]||0))return"yellow"}return"none"}Y();
