(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function c(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=c(n);fetch(n.href,a)}})();const P=(s,e=document)=>{const c=Array.from(e.querySelectorAll(s));if(!c)throw new Error(`Element not found: ${s}`);return c},d=(s,e=document)=>{const c=e==null?void 0:e.querySelector(s);if(!c)throw new Error(`Element not found: ${s}`);return c},J=s=>({getJson:async l=>(s(!0),window.fetch(l).then(n=>n.json()).then(async n=>(s(!1),n)).catch(()=>null)||null),getText:async l=>(s(!0),window.fetch(l).then(n=>n.text()).then(async n=>(s(!1),n)).catch(()=>null)||null)}),K=(s,e)=>Math.floor(Math.random()*(e-s)+s),z=s=>{const{getText:e,getJson:c}=J(s),l=[];return{loadWords:async()=>{let u=localStorage.getItem("sordle:words");u||(u=await e("https://iambrian.com/sordle-words/5-letter-words.txt"),u&&localStorage.setItem("sordle:words",u)),u&&l.push(...u.split(`
`))},getRandomWord:async()=>{const u=l[K(0,l.length-1)];return(await c("https://iambrian.com/sordle-words/5-letter-words/"+u+".json"))[0]},checkWord:u=>l.includes(u)}},C=async s=>await new Promise(e=>{setTimeout(()=>{e()},s)}),_=async()=>await new Promise(s=>{requestAnimationFrame(()=>{const e=new MessageChannel;e.port1.onmessage=s,e.port2.postMessage(void 0)})});function G(){const s=d(".notify");let e;const c=()=>{s.style.opacity="0",e=setTimeout(()=>{s.innerHTML=""},200)};return{notify:(n,a=!0)=>{e&&clearTimeout(e),s.innerHTML=n,setTimeout(()=>{s.style.opacity="1"},1),a&&(e=setTimeout(()=>{c()},1500))},hideNotify:c}}const j=6,y=5;function X(){const s=d(".app"),e=d(".overlay"),c=d("main"),l=d("main").innerHTML,n={welcome:d('[data-template="modal-welcome"]').innerHTML,success:d('[data-template="modal-success"]').innerHTML,fail:d('[data-template="modal-fail"]').innerHTML};e.innerHTML=n.welcome;let a,p=!0;const u=t=>{t!==p&&(p=t,t&&s.classList.add("loading"),a&&clearInterval(a),a=setTimeout(()=>{if(!p){s.classList.remove("loading");return}u(!0)},2e3))},{checkWord:H,getRandomWord:A,loadWords:F}=z(u);F().then(()=>E());const{hideNotify:S,notify:W}=G();let h,T=[],N;const $={};let v=()=>P(`main .attempt:nth-child(${i.index+1}) .char`);const I=async(t,r)=>{S(),T=t,h=r,c.innerHTML=l,N=d(".attempts",c);let o="";for(let m=0;m<j;m++){o+='<div class="attempt">';for(let f=0;f<y;f++)o+=`<div class="char" id="char-${m}-${f}"><div class="front"></div><div class="back"></div></div>`;o+="</div>"}N.innerHTML=o,await _(),g({index:0,chars:[]}),setTimeout(()=>{P("[data-key]",c).forEach(m=>{m.dataset.key&&($[m.dataset.key]=m)})},10)};let i={chars:[],index:0};const b=t=>{const r=d(`#char-${i.index}-${i.chars.length}`);d(".front",r).innerText=t||"",d(".back",r).innerText=t||""},g=t=>{i=t};let L=!1;const q=async(t=300)=>{L=!0,await Promise.all([...v().map(async(r,o)=>{await C(t*o),r.classList.add("flip")}),await C(t*(y+2))]),L=!1};let M;const x=(t="cell")=>{M&&clearTimeout(M);let r=v();t!=="row"&&(r=[r[0]]),r.forEach(o=>o.classList.add("horizontal-shake")),M=setTimeout(()=>{r.forEach(o=>o.classList.remove("horizontal-shake"))},500)},E=async()=>{const t=await A();return I(t.word.split(""),t)},k=()=>{h!=null&&h.meanings&&setTimeout(()=>{d("[data-definition]",e).innerHTML=`<h3>${T.join("")}</h3>
<ul class="meanings">
    ${h==null?void 0:h.meanings.map(t=>{var r;return`    
    <li>
        <p class="part-of-speech"><span>${t.partOfSpeech}</span></p>
        <ol>
            ${(r=t.definitions)==null?void 0:r.map(o=>`
            <li>
                <p>${o.definition}</p>
                ${o.example?`<p class="example">"${o.example}"</p>`:""}
            </li>`).join("")}
        </ol>
    </li>`}).join("")}
</ul>`},1)},R=async()=>{if(i.chars.length<y){x(),W("Not enough letters");return}if(!await H(i.chars.join(""))){x("row"),W("Not in word list");return}let r=0;const o={},m=v();i.chars.forEach((f,w)=>{T[w]===f?(o[f]="green",m[w].classList.add("green"),r++):T.includes(f)?(o[f]=o[f]||"yellow",m[w].classList.add("yellow")):o[f]=o[f]||"none"}),await q(),Object.entries(o).forEach(([f,w])=>{$[f].classList.add(w)}),r===y?(e.innerHTML=n.success,setTimeout(()=>{d("[data-attempt-text]",e).innerText=` ${i.index} ${i.index?"attempts":"attempt"}`},1),k(),E()):i.index+1===j&&(e.innerHTML=n.fail,k(),E()),g({chars:[],index:i.index+1})},O=t=>{if(!L&&$[t]){if(t==="backspace"){i.chars.length?(i.chars.pop(),b(""),g(i)):x();return}if(t==="enter"){R();return}i.chars.length===y&&i.chars.pop(),b(t),i.chars.push(t),g(i)}},D=async t=>{if(L)return;const r=t.target;if(r.nodeName.toLowerCase()==="a")return;if(t.preventDefault(),r.blur(),r.nodeName.toLowerCase()==="h1"){e.innerHTML=n.welcome;return}if(r.dataset.action==="closeModal"){e.innerHTML="";return}const o=r.dataset.key;o&&O(o)};s.addEventListener("click",D),e.addEventListener("click",()=>{e.innerHTML=""}),window.addEventListener("keyup",t=>O(t.key.toLowerCase()))}X();
