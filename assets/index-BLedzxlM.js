(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(e){if(e.ep)return;e.ep=!0;const a=s(e);fetch(e.href,a)}})();const j=(o,t=document)=>{const s=Array.from(t.querySelectorAll(o));if(!s)throw new Error(`Element not found: ${o}`);return s},u=(o,t=document)=>{const s=t==null?void 0:t.querySelector(o);if(!s)throw new Error(`Element not found: ${o}`);return s},K=o=>({getJson:async l=>(o(!0),window.fetch(l).then(e=>e.json()).then(async e=>(o(!1),e)).catch(()=>null)||null),getText:async l=>(o(!0),window.fetch(l).then(e=>e.text()).then(async e=>(o(!1),e)).catch(()=>null)||null)}),z=o=>{const{getText:t,getJson:s}=K(o),l=[];return{loadWords:async()=>{let f=localStorage.getItem("sordle:words");f||(f=await t("https://iambrian.com/sordle-words/5-letter-words.txt"),f&&localStorage.setItem("sordle:words",f)),f&&l.push(...f.split(`
`))},getRandomWord:async()=>(await s("https://iambrian.com/sordle-words/5-letter-words/"+"cares"+".json"))[0],checkWord:f=>l.includes(f)}},A=async o=>await new Promise(t=>{setTimeout(()=>{t()},o)}),_=async()=>await new Promise(o=>{requestAnimationFrame(()=>{const t=new MessageChannel;t.port1.onmessage=o,t.port2.postMessage(void 0)})});function G(){const o=u(".notify");let t;const s=()=>{o.style.opacity="0",t=setTimeout(()=>{o.innerHTML=""},200)};return{notify:(e,a=!0)=>{t&&clearTimeout(t),o.innerHTML=e,setTimeout(()=>{o.style.opacity="1"},1),a&&(t=setTimeout(()=>{s()},1500))},hideNotify:s}}const F=6,y=5;function X(){const o=u(".app"),t=u(".overlay"),s=u("main"),l=u("main").innerHTML,e={welcome:u('[data-template="modal-welcome"]').innerHTML,success:u('[data-template="modal-success"]').innerHTML,fail:u('[data-template="modal-fail"]').innerHTML};t.innerHTML=e.welcome;let a,r=!0;const f=n=>{n!==r&&(r=n,n&&o.classList.add("loading"),a&&clearInterval(a),a=setTimeout(()=>{if(!r){o.classList.remove("loading");return}f(!0)},2e3))},{checkWord:W,getRandomWord:S,loadWords:C}=z(f);C().then(()=>M());const{hideNotify:q,notify:N}=G();let h,L=[],b;const $={};let v=()=>j(`main .attempt:nth-child(${d.index+1}) .char`);const I=async(n,i)=>{q(),L=n,h=i,s.innerHTML=l,b=u(".attempts",s);let c="";for(let m=0;m<F;m++){c+='<div class="attempt">';for(let p=0;p<y;p++)c+=`<div class="char" id="char-${m}-${p}"><div class="front"></div><div class="back"></div></div>`;c+="</div>"}b.innerHTML=c,await _(),g({index:0,chars:[]}),setTimeout(()=>{j("[data-key]",s).forEach(m=>{m.dataset.key&&($[m.dataset.key]=m)})},10)};let d={chars:[],index:0};const k=n=>{const i=u(`#char-${d.index}-${d.chars.length}`);u(".front",i).innerText=n||"",u(".back",i).innerText=n||""},g=n=>{d=n};let T=!1;const R=async(n=300)=>{T=!0,await Promise.all([...v().map(async(i,c)=>{await A(n*c),i.classList.add("flip")}),await A(n*(y+2))]),T=!1};let E;const x=(n="cell")=>{E&&clearTimeout(E);let i=v();n!=="row"&&(i=[i[0]]),i.forEach(c=>c.classList.add("horizontal-shake")),E=setTimeout(()=>{i.forEach(c=>c.classList.remove("horizontal-shake"))},500)},M=async()=>{const n=await S();return I(n.word.split(""),n)},O=()=>{h!=null&&h.meanings&&setTimeout(()=>{u("[data-definition]",t).innerHTML=`<h3>${L.join("")}</h3>
<ul class="meanings">
    ${h==null?void 0:h.meanings.map(n=>{var i;return`    
    <li>
        <p class="part-of-speech"><span>${n.partOfSpeech}</span></p>
        <ol>
            ${(i=n.definitions)==null?void 0:i.map(c=>`
            <li>
                <p>${c.definition}</p>
                ${c.example?`<p class="example">"${c.example}"</p>`:""}
            </li>`).join("")}
        </ol>
    </li>`}).join("")}
</ul>`},1)},D=async()=>{if(d.chars.length<y){x(),N("Not enough letters");return}if(!await W(d.chars.join(""))){x("row"),N("Not in word list");return}let i=0;const c={},m=v();d.chars.forEach((p,w)=>{m[w].classList.remove("green","yellow","none");const H=B(p,w,L,d.chars);c[p]=H,m[w].classList.add(H),H==="green"&&i++}),await R(),Object.entries(c).forEach(([p,w])=>{$[p].classList.add(w)}),i===y?(t.innerHTML=e.success,setTimeout(()=>{u("[data-attempt-text]",t).innerText=` ${d.index} ${d.index?"attempts":"attempt"}`},1),O(),M()):d.index+1===F&&(t.innerHTML=e.fail,O(),M()),g({chars:[],index:d.index+1})},P=n=>{if(!T&&$[n]){if(n==="backspace"){d.chars.length?(d.chars.pop(),k(""),g(d)):x();return}if(n==="enter"){D();return}d.chars.length===y&&d.chars.pop(),k(n),d.chars.push(n),g(d)}},J=async n=>{if(T)return;const i=n.target;if(i.nodeName.toLowerCase()==="a")return;if(n.preventDefault(),i.blur(),i.nodeName.toLowerCase()==="h1"){t.innerHTML=e.welcome;return}if(i.dataset.action==="closeModal"){t.innerHTML="";return}const c=i.dataset.key;c&&P(c)};o.addEventListener("click",J),t.addEventListener("click",()=>{t.innerHTML=""}),window.addEventListener("keyup",n=>P(n.key.toLowerCase()))}function B(o,t,s,l){if(s[t]===o)return"green";if(s.includes(o)){const e={};for(let r=0;r<s.length;r++){const f=s[r];e[f]=(e[f]||0)+1}for(let r=0;r<l.length;r++)s[r]===l[r]&&(e[l[r]]=(e[l[r]]||1)-1);const a={};for(let r=0;r<=t;r++){if(s[r]===l[r])continue;const f=l[r];a[f]=(a[f]||0)+1}if(a[o]<=(e[o]||0))return"yellow"}return"none"}X();
