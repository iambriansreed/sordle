(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();const S=(n,e=document)=>{const s=Array.from(e.querySelectorAll(n));if(!s)throw new Error(`Element not found: ${n}`);return s},u=(n,e=document)=>{const s=e==null?void 0:e.querySelector(n);if(!s)throw new Error(`Element not found: ${n}`);return s},_=n=>({getJson:async l=>(n(!0),window.fetch(l).then(t=>t.json()).then(async t=>(n(!1),t)).catch(()=>null)||null),getText:async l=>(n(!0),window.fetch(l).then(t=>t.text()).then(async t=>(n(!1),t)).catch(()=>null)||null)}),z=n=>{const{getText:e,getJson:s}=_(n),l=[];return{loadWords:async()=>{let f=localStorage.getItem("sordle:words");f||(f=await e("https://iambrian.com/sordle-words/5-letter-words.txt"),f&&localStorage.setItem("sordle:words",f)),f&&l.push(...f.split(`
`))},getRandomWord:async()=>(await s("https://iambrian.com/sordle-words/5-letter-words/"+"cares"+".json"))[0],checkWord:f=>l.includes(f)}},A=async n=>await new Promise(e=>{setTimeout(()=>{e()},n)}),G=async()=>await new Promise(n=>{requestAnimationFrame(()=>{const e=new MessageChannel;e.port1.onmessage=n,e.port2.postMessage(void 0)})});function U(){const n=u(".notify");let e;const s=()=>{n.style.opacity="0",e=setTimeout(()=>{n.innerHTML=""},200)};return{notify:(t,a=!0)=>{e&&clearTimeout(e),n.innerHTML=t,setTimeout(()=>{n.style.opacity="1"},1),a&&(e=setTimeout(()=>{s()},1500))},hideNotify:s}}const j=6,y=5;function X(){const n=u(".app"),e=u(".overlay"),s=u("main"),l=u("main").innerHTML,t={welcome:u('[data-template="modal-welcome"]').innerHTML,success:u('[data-template="modal-success"]').innerHTML,fail:u('[data-template="modal-fail"]').innerHTML};e.innerHTML=t.welcome;let a,r=!0;const f=o=>{o!==r&&(r=o,o&&n.classList.add("loading"),a&&clearInterval(a),a=setTimeout(()=>{if(!r){n.classList.remove("loading");return}f(!0)},2e3))},{checkWord:W,getRandomWord:C,loadWords:I}=z(f);I().then(()=>x());const{hideNotify:R,notify:b}=U();let h,L=[],N;const $={},v=()=>S(`main .attempt:nth-child(${d.index+1}) .char`),K=async(o,i)=>{R(),L=o,h=i,s.innerHTML=l,N=u(".attempts",s);let c="";for(let m=0;m<j;m++){c+='<div class="attempt">';for(let p=0;p<y;p++)c+=`<div class="char" id="char-${m}-${p}"><div class="front"></div><div class="back"></div></div>`;c+="</div>"}N.innerHTML=c,await G(),g({index:0,chars:[]}),setTimeout(()=>{S("[data-key]",s).forEach(m=>{m.dataset.key&&($[m.dataset.key]=m)})},10)};let d={chars:[],index:0};const k=o=>{const i=u(`#char-${d.index}-${d.chars.length}`);u(".front",i).innerText=o||"",u(".back",i).innerText=o||""},g=o=>{d=o};let T=!1;const q=async(o=300)=>{T=!0,await Promise.all([...v().map(async(i,c)=>{await A(o*c),i.classList.add("flip")}),await A(o*(y+2))]),T=!1};let E;const M=(o="cell")=>{E&&clearTimeout(E);let i=v();o!=="row"&&(i=[i[0]]),i.forEach(c=>c.classList.add("horizontal-shake")),E=setTimeout(()=>{i.forEach(c=>c.classList.remove("horizontal-shake"))},500)},x=async()=>{const o=await C();return K(o.word.split(""),o)},O=()=>{h!=null&&h.meanings&&setTimeout(()=>{u("[data-definition]",e).innerHTML=`<h3>${L.join("")}</h3>
<ul class="meanings">
    ${h==null?void 0:h.meanings.map(o=>{var i;return`    
    <li>
        <p class="part-of-speech"><span>${o.partOfSpeech}</span></p>
        <ol>
            ${(i=o.definitions)==null?void 0:i.map(c=>`
            <li>
                <p>${c.definition}</p>
                ${c.example?`<p class="example">"${c.example}"</p>`:""}
            </li>`).join("")}
        </ol>
    </li>`}).join("")}
</ul>`},1)},D=async()=>{if(d.chars.length<y){M(),b("Not enough letters");return}if(!await W(d.chars.join(""))){M("row"),b("Not in word list");return}let i=0;const c={},m=v();d.chars.forEach((p,w)=>{m[w].classList.remove("green","yellow","none");const H=B(p,w,L,d.chars);c[p]=Y(c[p],H),m[w].classList.add(H),H==="green"&&i++}),await q(),Object.entries(c).forEach(([p,w])=>{$[p].classList.add(w)}),i===y?(e.innerHTML=t.success,setTimeout(()=>{u("[data-attempt-text]",e).innerText=` ${d.index} ${d.index?"attempts":"attempt"}`},1),O(),x()):d.index+1===j&&(e.innerHTML=t.fail,O(),x()),g({chars:[],index:d.index+1})},P=o=>{if(!T&&$[o]){if(o==="backspace"){d.chars.length?(d.chars.pop(),k(""),g(d)):M();return}if(o==="enter"){D();return}d.chars.length===y&&d.chars.pop(),k(o),d.chars.push(o),g(d)}},J=async o=>{if(T)return;const i=o.target;if(i.nodeName.toLowerCase()==="a")return;if(o.preventDefault(),i.blur(),i.nodeName.toLowerCase()==="h1"){e.innerHTML=t.welcome;return}if(i.dataset.action==="closeModal"){e.innerHTML="";return}const c=i.dataset.key;c&&P(c)};n.addEventListener("click",J),e.addEventListener("click",()=>{e.innerHTML=""}),window.addEventListener("keyup",o=>P(o.key.toLowerCase()))}const F={none:0,yellow:1,green:2};function Y(n,e){return!n||F[e]>F[n]?e:n}function B(n,e,s,l){if(s[e]===n)return"green";if(s.includes(n)){const t={};for(let r=0;r<s.length;r++){const f=s[r];t[f]=(t[f]||0)+1}for(let r=0;r<l.length;r++)s[r]===l[r]&&(t[l[r]]=(t[l[r]]||1)-1);const a={};for(let r=0;r<=e;r++){if(s[r]===l[r])continue;const f=l[r];a[f]=(a[f]||0)+1}if(a[n]<=(t[n]||0))return"yellow"}return"none"}X();
